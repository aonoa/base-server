{{- define "update_all" -}}
// Code generated by entgo-template. DO NOT EDIT.

package ent

{{- range $node := $.Nodes }}
{{ $receiver := printf "%sUpdateOne" $node.Name }}

// UpdateAll updates all mutable fields of the {{ $node.Name }} entity (excluding create_time, update_time and immutable fields).
func (u *{{ $receiver }}) UpdateAll({{ $node.Name | lower }} *{{ $node.Name }}) *{{ $receiver }} {
    // Skip if the input entity is nil to avoid panic
    if {{ $node.Name | lower }} == nil {
        return u
    }

    update := u
    {{- range $field := $node.Fields }}
        {{- /* 过滤条件：排除时间戳字段 + 排除不可变字段 */ -}}
        {{- if and (not (or (eq $field.Name "create_time") (eq $field.Name "update_time"))) (not $field.Immutable) }}
    update = update.Set{{ $field.StructField }}({{ $node.Name | lower }}.{{ $field.StructField }})
        {{- end }}
    {{- end }}
    return update
}
{{ end -}}
{{- end -}}